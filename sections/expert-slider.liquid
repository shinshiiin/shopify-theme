<div class="section">
  <div class="container {{ section.id }}-container">
    <div class="UGC-vids-section {{ section.id }}">
      <div class="section-header">
        <h2 class="section-title">{{ section.settings.section_title }}</h2>
      </div>
      
      <div class="carousel-wrapper">
        <button class="carousel-nav prev-btn" aria-label="Previous">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        
        <div class="video-carousel">
          <div class="swiper swiper-{{ section.id }} video-marquee">
            <div class="swiper-wrapper">
              {% if section.blocks.size > 0 %}
                {% for block in section.blocks %}
                  <div class="swiper-slide" {{ block.shopify_attributes }}>
                    <div class="video-container">
                      {% if block.settings.video != blank %}
                        {{ block.settings.video | video_tag: image_size: '1100x', autoplay: true, loop: true, controls: false, muted: true }}
                      {% elsif block.settings.video_url != blank %}
                        {{ block.settings.video_url | video_tag: autoplay: true, loop: true, muted: true, controls: false }}
                      {% endif %}
                      {% if block.settings.label != blank %}
                        <div class="overlay-label">
                          {{ block.settings.label }}
                        </div>
                      {% endif %}
                    </div>
                  </div>
                {% endfor %}
              {% else %}
                <div class="swiper-slide">
                  <div class="video-container placeholder">
                    <img src="{{ 'placeholder_3.webp' | asset_url }}" alt="Customer" loading="lazy">
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="video-container placeholder">
                    <img src="{{ 'placeholder_3.webp' | asset_url }}" alt="Customer" loading="lazy">
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="video-container placeholder">
                    <img src="{{ 'placeholder_3.webp' | asset_url }}" alt="Customer" loading="lazy">
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
        
        <button class="carousel-nav next-btn" aria-label="Next">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
      </div>
    </div>  
  </div>
</div>

{% style %}

.{{ section.id }}-container {
  margin: auto;
  background: {{ section.settings.section_background }};
  padding: 60px 20px;
}

.{{ section.id }} {
  max-width: 1400px;
  margin: 0 auto;
}

.{{ section.id }} .section-header {
  text-align: center;
  margin-bottom: 40px;
}

.{{ section.id }} .section-title {
  font-weight: 600;
  font-size: {{ section.settings.title_size }}px;
  color: {{ section.settings.title_color }} !important;
  letter-spacing: -0.02em;
  margin: 0;
  line-height: 1.2;
}

.{{ section.id }} .carousel-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  gap: 20px;
}

.{{ section.id }} .carousel-nav {
  flex-shrink: 0;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #ffffff;
  border: 1px solid #e0e0e0;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.{{ section.id }} .carousel-nav:hover {
  background: #f5f5f5;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.{{ section.id }} .carousel-nav svg {
  color: #333;
}

.{{ section.id }} .carousel-nav.swiper-button-disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.{{ section.id }} .video-carousel {
  flex: 1;
  overflow: hidden;
}

.{{ section.id }} .video-marquee {
  width: 100%;
  overflow: visible;
}

.{{ section.id }} .swiper-slide {
  width: auto;
  height: auto;
}

.{{ section.id }} .video-container {
  position: relative;
  width: 280px;
  height: 427px;
  border-radius: 12px;
  overflow: hidden;
  background: #f0f0f0;
}

.{{ section.id }} .swiper-slide video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.{{ section.id }} .placeholder img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.{{ section.id }} .overlay-label {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.85) 100%);
  color: #fff;
  padding: 50px 15px 15px;
  font-size: 14px;
  line-height: 1.4;
}

.{{ section.id }} .overlay-label .metafield-rich_text_field {
  font-size: 14px;
}

/* Tablet view */
@media (max-width: 1024px) {
  .{{ section.id }}-container {
    padding: 50px 20px;
  }

  .{{ section.id }} .section-title {
    font-size: calc({{ section.settings.title_size }}px - 6px);
  }

  .{{ section.id }} .video-container {
    width: 240px;
    height: 320px;
  }

  .{{ section.id }} .carousel-nav {
    width: 40px;
    height: 40px;
  }
}

/* Mobile view */
@media (max-width: 768px) {
  .{{ section.id }}-container {
    padding: 40px 16px;
  }

  .{{ section.id }} .section-header {
    margin-bottom: 30px;
  }

  .{{ section.id }} .section-title {
    font-size: clamp(24px, 6vw, calc({{ section.settings.title_size }}px - 12px));
  }

  .{{ section.id }} .carousel-wrapper {
    gap: 12px;
  }

  .{{ section.id }} .carousel-nav {
    width: 36px;
    height: 36px;
  }

  .{{ section.id }} .carousel-nav svg {
    width: 20px;
    height: 20px;
  }

  .{{ section.id }} .video-container {
    width: 200px;
    height: 280px;
  }

  .{{ section.id }} .overlay-label {
    padding: 40px 12px 12px;
    font-size: 13px;
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  .{{ section.id }}-container {
    padding: 32px 12px;
  }

  .{{ section.id }} .section-title {
    font-size: clamp(20px, 6vw, 28px);
  }

  .{{ section.id }} .carousel-nav {
    width: 32px;
    height: 32px;
  }

  .{{ section.id }} .video-container {
    width: 180px;
    height: 260px;
  }

  .{{ section.id }} .carousel-wrapper {
    gap: 8px;
  }
}

{% endstyle %}

<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    const prevBtn = document.querySelector('.{{ section.id }} .prev-btn');
    const nextBtn = document.querySelector('.{{ section.id }} .next-btn');
    
    const marqueeSlider = new Swiper('.swiper-{{ section.id }}', {
      slidesPerView: 'auto',
      spaceBetween: 20,
      loop: true,
      navigation: {
        nextEl: nextBtn,
        prevEl: prevBtn,
      },
      breakpoints: {
        1024: {
          slidesPerView: '4',
          spaceBetween: 20,
        },
        768: {
          slidesPerView: '4 ',
          spaceBetween: 16,
        },
        480: {
          slidesPerView: 'auto',
          spaceBetween: 12,
        },
        0: {
          slidesPerView: 'auto',
          spaceBetween: 12,
        }
      },
    });
  });
</script>

{% schema %}
  {
    "name": "UGC Vids",
    "settings": [
      {
        "type": "header",
        "content": "Section Settings"
      },
      {
        "type": "text",
        "id": "section_title",
        "label": "Section Title",
        "default": "See the Difference, Hear the Stories"
      },
      {
        "type": "color",
        "id": "title_color",
        "label": "Title Color",
        "default": "#2d2d2d"
      },
      {
        "type": "range",
        "id": "title_size",
        "min": 20,
        "max": 80,
        "step": 2,
        "unit": "px",
        "label": "Title Size",
        "default": 36
      },
      {
        "type": "color",
        "id": "section_background",
        "label": "Section Background Color",
        "default": "#ffffff"
      }
    ],
    "blocks": [
      {
        "type": "video",
        "name": "Video",
        "settings": [
          {
            "type": "video",
            "id": "video",
            "label": "Video File"
          },
          {
            "type": "video_url",
            "id": "video_url",
            "label": "Video URL",
            "info": "Use this if you want to embed a YouTube or Vimeo video instead of uploading a file",
            "accept": ["youtube", "vimeo"]
          },
          {
            "type": "richtext",
            "id": "label",
            "label": "Overlay Text",
            "info": "Text that appears at the bottom of the video"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "UGC Vids",
        "blocks": [
          {
            "type": "video"
          },
          {
            "type": "video"
          },
          {
            "type": "video"
          },
          {
            "type": "video"
          },
          {
            "type": "video"
          }
        ]
      }
    ]
  }
{% endschema %}
